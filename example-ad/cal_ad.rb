#! /usr/bin/env ruby

#l1 = [0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0]
#l1 = [0.05, 0.1, 0.15, 0.2, 0.25, 0.3, 0.35, 0.4, 0.45, 0.5, 0.55, 0.6, 0.65, 0.7, 0.75, 0.8, 0.85, 0.9, 0.95, 1.0]
l1 = [0.025, 0.05, 0.075, 0.1, 0.125, 0.15, 0.175, 0.2, 0.225, 0.25, 0.275, 0.3, 0.325, 0.35, 0.375, 0.4, 0.425, 0.45, 0.475, 0.5, 0.525, 0.55, 0.575, 0.6, 0.625, 0.65, 0.675, 0.7, 0.725, 0.75, 0.775, 0.8, 0.825, 0.85, 0.875, 0.9, 0.925, 0.95, 0.975, 1]
#l1 = [0.0125, 0.025, 0.0375, 0.05, 0.0625, 0.075, 0.0875, 0.1, 0.1125, 0.125, 0.1375, 0.15, 0.1625, 0.175, 0.1875, 0.2, 0.2125, 0.225, 0.2375, 0.25, 0.2625, 0.275, 0.2875, 0.3, 0.3125, 0.325, 0.3375, 0.35, 0.3625, 0.375, 0.3875, 0.4, 0.4125, 0.425, 0.4375, 0.45, 0.4625, 0.475, 0.4875, 0.5, 0.5125, 0.525, 0.5375, 0.55, 0.5625, 0.575, 0.5875, 0.6, 0.6125, 0.625, 0.6375, 0.65, 0.6625, 0.675, 0.6875, 0.7, 0.7125, 0.725, 0.7375, 0.75, 0.7625, 0.775, 0.7875, 0.8, 0.8125, 0.825, 0.8375, 0.85, 0.8625, 0.875, 0.8875, 0.9, 0.9125, 0.925, 0.9375, 0.95, 0.9625, 0.975, 0.9875, 1.0]
#l2 = [0.001, 0.005, 0.01, 0.05, 0.1, 0.2, 0.4, 0.6, 0.8, 1.0]
#l2 = [0.001, 0.005, 0.01, 0.05, 0.1, 0.15, 0.2, 0.25, 0.3, 0.35, 0.4, 0.45, 0.5, 0.55, 0.6, 0.65, 0.7, 0.75, 0.8, 0.85, 0.9, 0.95, 1.0]
l2 = [0.001, 0.005, 0.01, 0.025, 0.05, 0.075, 0.1, 0.125, 0.15, 0.175, 0.2, 0.225, 0.25, 0.275, 0.3, 0.325, 0.35, 0.375, 0.4, 0.425, 0.45, 0.475, 0.5, 0.525, 0.55, 0.575, 0.6, 0.625, 0.65, 0.675, 0.7, 0.725, 0.75, 0.775, 0.8, 0.825, 0.85, 0.875, 0.9, 0.925, 0.95, 0.975, 1]

f = File.open(ARGV[0])
n = 0
while f.gets
  if n == 7
    num = $_.to_i
  end
  n += 1
end

fs = ARGV[0].rindex("/")
if fs != nil
  fs += 1
else 
  fs = 0
end

fname = ARGV[0].slice(fs..ARGV[0].rindex(".") - 1)

pl = 0.0
sum = Array.new(num, 0.0)
b = Array.new(num, 0.0)
l1.each do |l|
  a = []
  f = File.open(fname + "-1-" + l.to_s)
  while f.gets
    a << $_.to_f
  end
  f.close
  num.times do |i|
    sum[i] += (a[i] + b[i]) * (l - pl) * 0.5
#    print sum[i], " ", a[i], " ", b[i], " ", l.to_f, " ", pl, "\n"
  end
  pl = l
  b = a
end

pl = 0.0
sum2 = Array.new(num, 0.0)
b = Array.new(num, 0.0)
l2.each do |l|
  a = []
  f = File.open(fname + "-2-" + l.to_s)
  while f.gets
    a << $_.to_f
  end
  f.close
  num.times do |i|
    sum2[i] += (a[i] + b[i]) * (l - pl) * 0.5
#    print sum2[i], " ", a[i], " ", b[i], " ", l.to_f, " ", pl, "\n"
  end
  pl = l
  b = a
end

num.times do |i|
  print sum[i] + sum2[i], " ", sum[i], " ", sum2[i], "\n"
end
